<?xml version="1.0" encoding="UTF-8"?>

<atlassian-plugin key="plugin.jtp" name="${project.name}" plugins-version="2">
  <plugin-info>
    <description>${project.description}</description>
    <version>${project.version}</version>
    <bundle-instructions>
      	<Import-Package>!com.google.appengine.api.urlfetch,*</Import-Package>
    </bundle-instructions>
    <application-version min="5.0"/>
    <vendor name="${project.organization.name}" url="${project.organization.url}"/>
    <param name="atlassian-licensing-enabled">true</param>
    <param name="configure.url">/plugins/servlet/com.tuncaysenturk.jira.plugins.plugin-license-compatibility/license</param>
    <param name="post.install.url">/plugins/servlet/jtp/configure</param>
    <param name="plugin-icon">images/jtp-icon.png</param>
	<param name="plugin-logo">images/jtp-logo.png</param>
	<param name="plugin-banner">images/jtp-banner.png</param>
  </plugin-info>
  
  	
	<web-item key="jira-menu-item" name="${project.name}" section="system.admin/globalsettings" weight="10" application="jira">
	    <description>Link to Jira Twitter Plugin configuration page</description> 
	    <label key="jtp.configuration.link" /> 
	    <link linkId="jtp.configuration.link">/plugins/servlet/jtp/configure</link> 
	</web-item>

	<component key="twitterStreamStartup" class="com.tuncaysenturk.jira.plugins.jtp.twitter.startup.JiraTwitterStreamStartup" public="true"
               interface="com.atlassian.sal.api.lifecycle.LifecycleAware" />
	<component key="tweetBuilder" name="Tweet Builder" class="com.tuncaysenturk.jira.plugins.jtp.TweetBuilderImpl">
	    <interface>com.tuncaysenturk.jira.plugins.jtp.TweetBuilder</interface>
	</component>
	<component key="jiraTwitterIssueService" name="Jira Twitter Issue Service" class="com.tuncaysenturk.jira.plugins.jtp.issue.JiraTwitterIssueServiceImpl">
        <interface>com.tuncaysenturk.jira.plugins.jtp.issue.JiraTwitterIssueService></interface>
    </component>
	<component key="twitterService" name="Twitter Service" class="com.tuncaysenturk.jira.plugins.jtp.twitter.TwitterServiceImpl">
	    <interface>com.tuncaysenturk.jira.plugins.jtp.twitter.TwitterService</interface>
	</component>
	<component key="twitterStream" name="Twitter Stream Listener" class="com.tuncaysenturk.jira.plugins.jtp.twitter.JiraTwitterStreamImpl">
	    <interface>com.tuncaysenturk.jira.plugins.jtp.twitter.JiraTwitterStream</interface>
	</component>
	<workflow-function key="tweet-post-function" name="Tweet Post Function" i18n-name-key="jtp.postfunction.name" class="com.tuncaysenturk.jira.plugins.jtp.TweetPostFunctionFactory">
		<description key="jtp.postfunction.description">Jira Twitter Plugin</description>
	    <function-class>com.tuncaysenturk.jira.plugins.jtp.TweetPostFunction</function-class>
	    <resource type="velocity" name="view" location="templates/postfunctions/tweet-post-function.vm"/>
	    <resource type="velocity" name="input-parameters" location="templates/postfunctions/tweet-post-function-input.vm"/>
	    <resource type="velocity" name="edit-parameters" location="templates/postfunctions/tweet-post-function-input.vm"/>
	    <resource type="i18n" name="i18nBean" location="com.tuncaysenturk.jira.plugins.jtp.tweet-post-function"/>
	</workflow-function>  
  
  <component-import key="pluginAccessor" interface="com.atlassian.plugin.PluginAccessor"/>
  <component-import key="pluginController" interface="com.atlassian.plugin.PluginController"/>
  <component-import key="txTemplate" interface="com.atlassian.sal.api.transaction.TransactionTemplate"/>
  <component-import key="applicationProperties" interface="com.atlassian.sal.api.ApplicationProperties"/>
  <component-import key="templateRenderer" interface="com.atlassian.templaterenderer.TemplateRenderer"/>
  <component-import key="pluginSettingsFactory" interface="com.atlassian.sal.api.pluginsettings.PluginSettingsFactory"/>
  <component-import key="loginUriProvider" interface="com.atlassian.sal.api.auth.LoginUriProvider"/>
  <component-import key="userManager" interface="com.atlassian.sal.api.user.UserManager"/>
  <component-import key="i18nResolver" interface="com.atlassian.sal.api.message.I18nResolver"/>
  <component key="thirdPartyPluginLicenseStorageManager" class="com.atlassian.upm.license.storage.lib.ThirdPartyPluginLicenseStorageManagerImpl"/>
  <component key="pluginLicenseStoragePluginInstaller" class="com.atlassian.upm.license.storage.lib.PluginLicenseStoragePluginInstaller"/>
  <component key="atlassianMarketplaceUriFactory" class="com.atlassian.upm.license.storage.lib.AtlassianMarketplaceUriFactoryImpl"/>
  <servlet name="License Servlet" i18n-name-key="license-servlet.name" key="license-servlet" class="com.tuncaysenturk.jira.plugins.compatibility.servlet.LicenseServlet">
    <description key="license-servlet.description">The License Servlet Plugin</description>
    <url-pattern>/com.tuncaysenturk.jira.plugins.plugin-license-compatibility/license</url-pattern>
  </servlet>
  
  <servlet key="jtp-configure-servlet" class="com.tuncaysenturk.jira.plugins.compatibility.servlet.ConfigureServlet">
    <url-pattern>/jtp/configure</url-pattern>
</servlet>
</atlassian-plugin>
